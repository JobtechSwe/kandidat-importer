import pytest


def pytest_generate_tests(metafunc):
    if 'msg' in metafunc.fixturenames:
        metafunc.parametrize("msg", [{
    "annons": {
        "sprak": [],
        "lonTyp": {
            "varde": "1"
        },
        "status": "GODKAND_FOR_PUBLICERING",
        "korkort": [],
        "version": "1.0",
        "annonsId": 7938655,
        "kallaTyp": "VIA_PLATSBANKEN_DXA",
        "referens": "A814544",
        "skapadAv": "0",
        "skapadTid": "Sep 21, 2018 8:20:24 AM",
        "yrkesroll": {
            "varde": "5714"
        },
        "annonstext": " I Knivsta g\u00e5r framtidsandan att ta p\u00e5. L\u00e4get mellan Stockholm och Uppsala \u00e4r mycket attraktivt och Knivsta v\u00e4xer s\u00e5 det knakar. Vi bygger aktivt det h\u00e5llbara samh\u00e4llet med n\u00e4rhet till b\u00e5de storstad och natur. Ta chansen att uppleva och utvecklas med Knivsta kommun - d\u00e4r framtiden bor.\n\nSkutans f\u00f6rskola ligger i centrala Knivsta, f\u00f6rskolan har fyra avdelningar och plats f\u00f6r totalt 78 barn i \u00e5ldrarna 1-5 \u00e5r. Vi arbetar Reggio Emilia inspirerat och arbetet bedrivs i projektform med l\u00e4rmilj\u00f6er och pedagogisk dokumentation som viktiga verktyg. Vi har en fin och inspirerande utemilj\u00f6 och g\u00e5rd samt n\u00e4rhet till s\u00e5v\u00e4l centrum som skog och natur. P\u00e5 Skutan r\u00e5der god st\u00e4mning och samarbetsvilja, allas kompetenser tas till vara och vi jobbar tillsammans f\u00f6r att tillsammans f\u00f6r att utveckla verksamheten.\r\n\r\nARBETSUPPGIFTER\nSom f\u00f6rskol\u00e4rare p\u00e5 Skutans f\u00f6rskola ansvarar du tillsammans med arbetslaget f\u00f6r den pedagogiska verksamheten. I uppdraget ing\u00e5r att leda arbetet med att planera, genomf\u00f6ra, dokumentera samt f\u00f6lja upp, utv\u00e4rdera och utveckla verksamheten utifr\u00e5n L\u00e4roplan f\u00f6r f\u00f6rskola (Lpf\u00f6 98/10). M\u00e5let \u00e4r att l\u00e4gga grunden f\u00f6r det livsl\u00e5nga l\u00e4randet samt utveckla f\u00f6rskolans kvalitet. \n\nDu arbetar aktivt f\u00f6r att skapa en stimulerande och utvecklande verksamhet och milj\u00f6 med barnen i centrum. Tillsammans med \u00f6vriga pedagoger arbetar du s\u00e5 att verksamheten utmanar barnen till aktivitet, l\u00e4rande och ansvarstagande. Du tar ansvar f\u00f6r att verksamheten utg\u00e5r fr\u00e5n barnens erfarenhetsv\u00e4rld, intressen motivation och drivkraft att s\u00f6ka ny kunskap.\n\nSom medarbetare i Knivsta kommuns f\u00f6rskoleverksamhet f\u00e5r du ta del av:\n\u2013\tLokalt avtal med pedagogisk utvecklingstid i snitt 5,5 -6 timmar per vecka\n\u2013\tIKT som en naturlig del av det pedagogiska arbetet i vardagen\n\u2013\tNTA, Natur och teknik f\u00f6r alla\n\u2013\tKompetens och utvecklingsdagar 4 ggr per \u00e5r\n\u2013\tGemensamma kommun\u00f6vergripande kompetenssatsningar inom aktuella utvecklingsomr\u00e5den\r\n\r\nKVALIFIKATIONER\nVi s\u00f6ker dig som har f\u00f6rskoll\u00e4rarlegitimation eller som har f\u00f6rskoll\u00e4rarexamen och v\u00e4ntar p\u00e5 din legitimation. \n\nVi ser g\u00e4rna att du \u00e4r intresserad av att arbeta utifr\u00e5n Reggio Emilias pedagogiska f\u00f6rh\u00e5llningss\u00e4tt och att du har erfarenhet av att arbeta med pedagogisk dokumentation och IKT i f\u00f6rskolan.\nGod samarbetsf\u00f6rm\u00e5ga samt f\u00f6rm\u00e5ga att arbeta sj\u00e4lvst\u00e4ndigt. \n\nStor vikt l\u00e4ggs vid personlig l\u00e4mplighet samt f\u00f6rm\u00e5ga att bygga goda relationer med s\u00e5v\u00e4l barn, kollegor och v\u00e5rdnadshavare.\n\r\n\n\u00d6VRIGT\nKnivsta kommun vill ta tillvara de kvaliteter som j\u00e4mn k\u00f6nsf\u00f6rdelning och etnisk och kulturell m\u00e5ngfald tillf\u00f6r verksamheten. \n\nAnv\u00e4nd l\u00e4nken i annonsen f\u00f6r att s\u00f6ka tj\u00e4nsten. Skulle du beh\u00f6va st\u00f6d n\u00e5r du supporten p\u00e5 \n0771-693 693.\n\nHar du fr\u00e5gor om tj\u00e4nsten \u00e4r du v\u00e4lkommen att h\u00f6ra av dig till kontaktpersonen i annonsen. Facklig kontakt n\u00e5s via kommunens hemsida, rubriken \"Lediga jobb\". \n\nVi anv\u00e4nder e-rekrytering f\u00f6r att effektivisera och kvalitetss\u00e4kra rekryteringsarbetet. Alla dina uppgifter sparas p\u00e5 ditt CV-konto och du kan enkelt logga in och uppdatera dina uppgifter n\u00e4r du vill. Fyll d\u00e4rf\u00f6r i dina uppgifter s\u00e5 omsorgsfullt som m\u00f6jligt f\u00f6r att ge en r\u00e4ttvisande bild av dig sj\u00e4lv. Uppgifterna behandlas och sparas enligt dataskyddsf\u00f6rordningen. \n\n\nVarmt v\u00e4lkommen med din ans\u00f6kan!\n\nInf\u00f6r rekryteringsarbetet har vi tagit st\u00e4llning till rekryteringskanaler och marknadsf\u00f6ring. Vi undanbeder oss d\u00e4rf\u00f6r best\u00e4mt kontakt med medies\u00e4ljare, rekryteringssajter och liknande.",
        "anvandarId": "0",
        "postadress": {
            "postnr": "74175",
            "postort": "Knivsta",
            "gatuadress": "Knivsta kommun"
        },
        "kompetenser": [
            {
                "vikt": 5,
                "varde": "604238"
            },
            {
                "vikt": 5,
                "varde": "608920"
            },
            {
                "vikt": 5,
                "varde": "603204"
            }
        ],
        "statusdatum": "Sep 21, 2018 8:20:23 AM",
        "annonsrubrik": "F\u00f6rskoll\u00e4rare Skutans f\u00f6rskola",
        "antalPlatser": 1,
        "arbetstidTyp": {
            "varde": "1"
        },
        "besoksadress": {
            "gatuadress": "Centralv\u00e4gen 18 Knivsta"
        },
        "inskickadTid": "Sep 21, 2018 8:05:57 AM",
        "uppdateradAv": "0",
        "arbetsplatsId": "0",
        "uppdateradTid": "Sep 21, 2018 8:20:24 AM",
        "anstallningTyp": {
            "varde": "1"
        },
        "arbetsgivareId": "20257283",
        "varaktighetTyp": {
            "varde": "1"
        },
        "arbetsplatsNamn": "Knivsta kommun, Skola/f\u00f6rskola",
        "externtAnnonsId": "46-212000-3013-FFBDC145F4024558AF8BFB6C7D5EC588",
        "kontaktpersoner": [
            {
                "epost": "ulrika.wiklund@knivsta.se",
                "befattning": "F\u00f6rskolechef",
                "beskrivning": "Ulrika Wiklund",
                "telefonnummer": "018-347934",
                "fackligRepresentant": False
            }
        ],
        "lonebeskrivning": " M\u00e5nadsl\u00f6n\r\nF\u00d6RM\u00c5NER\nPedagogisk lunch och friskv\u00e5rdsbidrag.",
        "arbetsgivareNamn": "Knivsta kommun",
        "arbetsplatsadress": {
            "lan": {
                "varde": "03"
            },
            "land": {
                "varde": "199"
            },
            "kommun": {
                "varde": "0330"
            },
            "latitud": "59.7149476660647",
            "longitud": "17.8173711284748"
        },
        "publiceringsdatum": "Sep 21, 2018 8:05:56 AM",
        "yrkeserfarenheter": [],
        "visaEjAntalPlatser": False,
        "visaEjArbetsgivare": False,
        "ansokningssattViaAF": False,
        "organisationsnummer": "2120003013",
        "tillgangTillEgenBil": False,
        "villkorsbeskrivning": "Heltid. \r\nTillsvidareanst\u00e4llning, tilltr\u00e4de: Tilltr\u00e4de omg\u00e5ende.\n\nRekrytering sker l\u00f6pande under f\u00f6ruts\u00e4ttning att aktuella beslut tas.",
        "ingenErfarenhetKravs": True,
        "publiceringskanalAis": True,
        "sistaAnsokningsdatum": "Oct 3, 2018 11:59:59 PM",
        "sistaPubliceringsdatum": "Oct 3, 2018 11:59:59 PM",
        "ansokningssattWebbadress": "https://recruit.visma.com/Public/Apply.aspx?guidAssignment=ffbdc145-f402-4558-af8b-fb6c7d5ec588&publishCode=AMS&TK=5417c3c4-e503-4fbc-9dba-141c39af2683",
        "publiceringskanalPlatsbanken": True,
        "publiceringskanalPlatsjournalen": True
    },
    "version": 1 }  # end of msg 1
            ,{'id': 7938655, 'rubrik': 'Förskollärare Skutans förskola', 'sista_ansokningsdatum': '2018-10-03T23:59:59',
             'antal_platser': 1, 'beskrivning': {'information': None, 'behov': None, 'krav': None,
                                                 'villkor': 'Heltid. \r\nTillsvidareanställning, tillträde: Tillträde omgående.\n\nRekrytering sker löpande under förutsättning att aktuella beslut tas.',
                                                 'annonstext': '\n\n\nHeltid. \r\nTillsvidareanställning, tillträde: Tillträde omgående.\n\nRekrytering sker löpande under förutsättning att aktuella beslut tas.'},
             'arbetsplats_id': '0', 'anstallningstyp': {'kod': '1', 'term': 'Vanlig anställning'},
             'lonetyp': {'kod': '1', 'term': 'Fast månads- vecko- eller timlön'},
             'varaktighet': {'kod': '1', 'term': 'Tillsvidare'}, 'arbetstidstyp': {'kod': '1', 'term': 'Heltid'},
             'arbetsomfattning': {'min': None, 'max': None}, 'tilltrade': None,
             'arbetsgivare': {'id': '20257283', 'telefonnummer': None, 'epost': None, 'webbadress': None,
                              'organisationsnummer': '2120003013', 'namn': 'Knivsta kommun',
                              'arbetsplats': 'Knivsta kommun, Skola/förskola'},
             'ansokningsdetaljer': {'information': None, 'referens': 'A814544', 'epost': None, 'via_af': False,
                                    'webbadress': 'https://recruit.visma.com/Public/Apply.aspx?guidAssignment=ffbdc145-f402-4558-af8b-fb6c7d5ec588&publishCode=AMS&TK=5417c3c4-e503-4fbc-9dba-141c39af2683',
                                    'annat': None}, 'erfarenhet_kravs': False, 'egen_bil': False,
             'korkort_kravs': False, 'yrkesroll': {'kod': '5714', 'term': 'Lärare i förskola/Förskollärare'},
             'yrkesgrupp': {'kod': '2343', 'term': 'Förskollärare'},
             'yrkesomrade': {'kod': '15', 'term': 'Pedagogiskt arbete'},
             'arbetsplatsadress': {'kommunkod': '0330', 'lan': '03', 'gatuadress': None, 'postnummer': None,
                                   'postort': None, 'latitud': '59.7149476660647', 'longitud': '17.8173711284748'},
             'krav': {'kompetenser': [{'kod': '604238', 'term': 'Reggio Emilia-pedagogik', 'vikt': 5},
                                      {'kod': '608920', 'term': 'Förskollärarlegitimation', 'vikt': 5},
                                      {'kod': '603204', 'term': 'Förskollärarexamen', 'vikt': 5}], 'sprak': [],
                      'utbildningsniva': [], 'utbildningsinriktning': [], 'yrkeserfarenheter': []},
             'meriterande': {'kompetenser': [], 'sprak': [], 'utbildningsniva': [],
                             'utbildningsinriktning': [{'kod': None, 'term': None, 'vikt': None}],
                             'yrkeserfarenheter': []}, 'publiceringsdatum': '2018-09-21T08:05:56', 'kalla': None,
             'publiceringskanaler': {'platsbanken': True, 'ais': True, 'platsjournalen': True},
             'status': {'publicerad': False, 'sista_publiceringsdatum': '2018-10-03T23:59:59',
                        'skapad': '2018-09-21T08:20:24', 'skapad_av': '0', 'uppdaterad': '2018-09-21T08:20:24',
                        'uppdaterad_av': '0', 'anvandarId': '0'}} # end of msg 2 (already in correct format to cover else: return message_envelope
        ,{"annons": {"ingenErfarenhetKravs": False }, "version": 2} # end of msg
        ,{"annons": {"ingenErfarenhetKravs": None }, "version": 3}  # end of msg
        ,{"annons": {"tillgangTillEgenBil": True}, "version": 1}  # end of msg
        ,{"annons": {"tillgangTillEgenBil": None}, "version": None}  # end of msg
        ,{"annons": {"tillgangTillEgenBil": False}, "version": 3}  # end of msg
        ,{"annons": {"korkort": False}, "version": 1}  # end of msg
        ,{"annons": {"korkort": "B"}, "version": 1}  # end of msg
        ,{"annons": { "arbetsplatsadress": {
            "land": {"varde": "199" },
            "latitud": "59.1234" }}, "version": 1} #end of msg
        ,{"annons": {"kompetenser": [{"vikt": 5,"varde": "604238"},{"vikt": 3, "varde": "608920"},{"vikt": 1,"varde": "603204" }]
                     ,"sprak": [{"vikt": 5, "varde": "424"},{"vikt": 3,"varde": "2"},{"vikt": 1,"varde": "3"}]
                     ,"yrkeserfarenheter": [{"vikt": 5, "varde": "5541"},{"vikt": 3,"varde": "7525"},{"vikt": 1,"varde": "3"}]
                     #,"utbildningsniva": [{"vikt": 5, "varde": "1"}, {"vikt": 3, "varde": "2"}, {"vikt": 1, "varde": "3"}]
                     #,"utbildningsinriktning": [{"vikt": 5, "varde": "1"}, {"vikt": 3, "varde": "2"}, {"vikt": 1, "varde": "3"}]
        }, "version": 1} # end of msg
        ,{"annons": {"kompetenser": [{"vikt": 5,"varde": "604238"},{"vikt": 4, "varde": "608920"},{"vikt": 1,"varde": "603204" }]
                     ,"sprak": [{"vikt": 5, "varde": "424"},{"vikt": 4,"varde": "2"},{"vikt": 1,"varde": "424"}]
                     ,"yrkeserfarenheter": [{"vikt": 5, "varde": "5541"},{"vikt": 4,"varde": "7525"},{"vikt": 1,"varde": "5541"}]
                     #,"utbildningsniva": [{"vikt": 5, "varde": "1"}, {"vikt": 3, "varde": "2"}, {"vikt": 1, "varde": "3"}]
                     #,"utbildningsinriktning": [{"vikt": 5, "varde": "1"}, {"vikt": 3, "varde": "2"}, {"vikt": 1, "varde": "3"}]
        }, "version": 1} # end of msg
        ,{"annons": {"publiceringskanalPlatsbanken": False
                    ,"publiceringskanalAis": False
                    ,"publiceringskanalPlatsjournalen": False
         },"version": 1}  # end of msg
        ,{"annons": {"status": "PUBLICERAD"}, "version": 1}  # end of msg
        ,{"annons": {"status": "EJ_PUBLICERAD"}, "version": 1}  # end of msg
        ,{"annons": {"yrkesroll": {"varde": "0000"}}, "version": 1}  # end of msg
        ,{"annons": {"yrkesroll": {"varde": "5541"}}, "version": 1}  # end of msg
        ,{} # empty msg

            ])


@pytest.fixture
def msg(request):
    return request.param
